# QQ邮箱配置使用指南

## 📧 概述

本指南将帮助你在股票交易系统中配置和使用QQ邮箱发送邮件。QQ邮箱是一个稳定可靠的邮件服务商，支持SMTP协议发送邮件。

## 🔑 重要概念

### 什么是授权码？
- **授权码**是QQ邮箱用于登录第三方客户端/服务的专用密码
- **不是**你的QQ密码
- 适用于POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务
- 为了账户安全，请不要告诉他人你的授权码

### POP3/IMAP/SMTP 服务说明
- **POP3**: 用于下载邮件，操作不会反馈到服务器
- **IMAP**: 双向同步，客户端操作会反馈到服务器
- **SMTP**: 用于发送邮件（我们主要使用这个）

## 🚀 配置步骤

### 步骤1: 获取QQ邮箱授权码

1. **登录QQ邮箱网页版**
   - 访问 [mail.qq.com](https://mail.qq.com)
   - 使用你的QQ账号和密码登录

2. **进入设置页面**
   - 点击右上角的"设置"图标
   - 选择"账户"选项

3. **开启SMTP服务**
   - 找到"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
   - 开启"POP3/SMTP服务"或"IMAP/SMTP服务"
   - 点击"生成授权码"

4. **保存授权码**
   - 复制生成的授权码
   - 妥善保存，不要泄露给他人

### 步骤2: 修改配置文件

编辑 `config.py` 文件，进行以下修改：

```python
# 将主服务商改为QQ邮箱
ACTIVE_SMTP_PROVIDER = "qq"

# 填写你的QQ邮箱信息
SENDER_CREDENTIALS = {
    "email": "你的QQ号码@qq.com",  # 例如：123456789@qq.com
    "password": "你的授权码"       # 刚才获取的授权码，不是QQ密码
}
```

### 步骤3: 测试配置

运行测试脚本验证配置是否正确：

```bash
python test_qq_email.py
```

## ⚙️ 技术配置详情

### SMTP服务器信息
- **服务器地址**: `smtp.qq.com`
- **端口**: `465` (推荐，SSL加密) 或 `587` (STARTTLS加密)
- **加密方式**: SSL/TLS
- **认证方式**: 用户名 + 授权码

### 配置文件结构
```python
SMTP_CONFIGS = {
    "qq": {
        "server": "smtp.qq.com",
        "port": 465,  # 推荐使用465端口
        "use_ssl": True,  # 必须使用SSL
        "description": "腾讯QQ邮箱 (需要使用授权码，非QQ密码)"
    }
}
```

## 🧪 测试和验证

### 运行测试脚本
```bash
python test_qq_email.py
```

### 测试内容
1. **配置检查**: 验证QQ邮箱配置是否存在
2. **连接测试**: 测试SMTP连接是否成功
3. **发送测试**: 发送一封测试邮件验证功能

### 预期结果
- ✅ 配置检查通过
- ✅ 连接测试成功
- ✅ 测试邮件发送成功

## ❗ 常见问题解决

### 认证失败
**问题**: SMTP认证失败
**解决方案**:
- 检查邮箱地址是否正确
- 确认使用的是授权码而非QQ密码
- 确认已开启SMTP服务

### 连接超时
**问题**: 连接服务器超时
**解决方案**:
- 检查网络连接
- 确认防火墙设置
- 尝试使用465端口

### SSL错误
**问题**: SSL连接失败
**解决方案**:
- 确认端口配置正确
- 检查Python版本和SSL库
- 尝试使用不同的端口

## 🔒 安全注意事项

1. **保护授权码**
   - 不要将授权码硬编码在代码中
   - 考虑使用环境变量或配置文件
   - 定期更换授权码

2. **网络安全**
   - 使用SSL/TLS加密连接
   - 避免在不安全的网络环境下使用
   - 定期检查账户安全状态

3. **权限管理**
   - 只开启必要的服务
   - 定期检查已授权的应用
   - 及时撤销不需要的授权

## 📱 移动端管理

### QQ邮箱APP
1. 打开QQ邮箱APP
2. 点击左上角头像
3. 选择"我的账户"
4. 点击"安全管理" -> "设备管理"
5. 管理授权码

### 网页端管理
1. 登录QQ邮箱网页版
2. 进入"设置" -> "账户"
3. 找到"设备管理" -> "授权码管理"
4. 查看和管理所有授权码

## 🔄 维护和更新

### 定期检查
- 每月检查一次授权码状态
- 确认SMTP服务正常运行
- 检查邮件发送日志

### 更新配置
- 如果修改QQ密码，需要重新生成授权码
- 定期更新Python依赖库
- 关注QQ邮箱服务更新

## 📞 技术支持

如果遇到问题，可以：
1. 查看本指南的常见问题部分
2. 运行测试脚本获取详细错误信息
3. 检查QQ邮箱官方帮助文档
4. 联系系统管理员

---

**注意**: 本指南基于当前系统版本编写，如有更新请参考最新文档。
